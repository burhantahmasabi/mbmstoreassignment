@addTagHelper "*, Microsoft.AspNetCore.Mvc.TagHelpers"
@using MbmStore.Models;

@{
    ViewData["Title"] = "Invoices";
}

<h1>Invoices</h1>
<a asp-controller="Home" asp-action="Index">< Home</a>

<div class="card">
    <div class="row">
        <p><b>Customer</b></p>
        <p><b>Product</b></p>
        <p><b>Price</b></p>
    </div>
    @foreach (Invoice invoice in ViewBag.Invoices)
    {
        decimal price = 0M;
        <div class="row">
            <p>@invoice.Customer.FirstName @invoice.Customer.LastName</p>
            <p>
                @foreach (OrderItem product in invoice.OrderItems)
                {
                    <span>@product.Product.Title</span>
                }
        </p>
        <p>
            @foreach (OrderItem product in invoice.OrderItems)
            {
                <span>@String.Format("{0:0.00}", product.Product.Price)</span>
                price += product.Product.Price;
            }
    </p>
    <p></p>
    <p><b>Total:</b></p>
    <p><b>@String.Format("{0:0.00}", price)</b></p>
</div>
}
</div>

